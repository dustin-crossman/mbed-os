stages:
  - test

# Compile TARGET_PSOC6
test_mbed_062:
  stage: test
  tags:
    - MBED_TEST
  script:
    - mbedls -m 1900:CY8CKIT_062_WIFI_BT 
    - mbed test --compile -m CY8CKIT_062_WIFI_BT_M0_PSA -t GCC_ARM -n *psa-spm_smoke -v
    - mbed test --compile -m CY8CKIT_062_WIFI_BT_PSA -t GCC_ARM -n *psa-spm_smoke -v
    - mbed test --run -m CY8CKIT_062_WIFI_BT_PSA -t GCC_ARM -n *psa-spm_smoke -v

# Compile TARGET_PSOC6
test_mbed_crypto:
  stage: test
  tags:
    - MBED_TEST
  script:
    - echo "Test"

# Compile TARGET_PSOC6_PSA
before_script:
    - python -m pip install -r ./targets/TARGET_Cypress/TARGET_PSOC6/sb-provisioning/requirements.txt
test_mbed_064_psa:
  stage: test
  tags:
    - MBED_TEST
  script:
    - mbedls -m 1907:CY8CPROTO_064_SB 
    - mbed test --compile -m CY8CPROTO_064_SB_M0_PSA -t GCC_ARM -n *psa-* -v
    - mbed test --compile -m CY8CPROTO_064_SB_PSA -t GCC_ARM -n *psa-* -v
    - mbed test --run -m CY8CPROTO_064_SB_PSA -t GCC_ARM -n *psa-* -v
