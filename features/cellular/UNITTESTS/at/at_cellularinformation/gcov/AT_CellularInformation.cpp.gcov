        -:    0:Source:../../../framework/AT/AT_CellularInformation.cpp
        -:    0:Graph:objs/AT_CellularInformation_unit/AT_CellularInformation.gcno
        -:    0:Data:objs/AT_CellularInformation_unit/AT_CellularInformation.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:/*
        -:    2: * Copyright (c) 2018, Arm Limited and affiliates.
        -:    3: * SPDX-License-Identifier: Apache-2.0
        -:    4: *
        -:    5: * Licensed under the Apache License, Version 2.0 (the "License");
        -:    6: * you may not use this file except in compliance with the License.
        -:    7: * You may obtain a copy of the License at
        -:    8: *
        -:    9: *     http://www.apache.org/licenses/LICENSE-2.0
        -:   10: *
        -:   11: * Unless required by applicable law or agreed to in writing, software
        -:   12: * distributed under the License is distributed on an "AS IS" BASIS,
        -:   13: * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
        -:   14: * See the License for the specific language governing permissions and
        -:   15: * limitations under the License.
        -:   16: */
        -:   17:
        -:   18:#include "AT_CellularInformation.h"
        -:   19:
        -:   20:using namespace mbed;
        -:   21:
        3:   22:AT_CellularInformation::AT_CellularInformation(ATHandler &at) : AT_CellularBase(at)
        -:   23:{
        3:   24:}
        -:   25:
        4:   26:AT_CellularInformation::~AT_CellularInformation()
        -:   27:{
        4:   28:}
        -:   29:
        1:   30:nsapi_error_t AT_CellularInformation::get_manufacturer(char *buf, size_t buf_size)
        -:   31:{
        1:   32:    return get_info("AT+CGMI", buf, buf_size);
        -:   33:}
        -:   34:
        1:   35:nsapi_error_t AT_CellularInformation::get_model(char *buf, size_t buf_size)
        -:   36:{
        1:   37:    return get_info("AT+CGMM", buf, buf_size);
        -:   38:}
        -:   39:
        1:   40:nsapi_error_t AT_CellularInformation::get_revision(char *buf, size_t buf_size)
        -:   41:{
        1:   42:    return get_info("AT+CGMR", buf, buf_size);
        -:   43:}
        -:   44:
        3:   45:nsapi_error_t AT_CellularInformation::get_info(const char *cmd, char *buf, size_t buf_size)
        -:   46:{
        3:   47:    _at.lock();
        -:   48:
        3:   49:    _at.cmd_start(cmd);
        3:   50:    _at.cmd_stop();
        3:   51:    _at.resp_start();
        3:   52:    _at.read_string(buf, buf_size-1); // stop tag OK\r\n
        3:   53:    _at.resp_stop();
        -:   54:
        3:   55:    return _at.unlock_return_error();
        -:   56:}
